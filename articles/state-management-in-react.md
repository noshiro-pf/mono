---
title: 'React での状態管理について'
emoji: '🐈'
type: 'tech' # tech: 技術記事 / idea: アイデア
topics: ['react', 'typescript']
published: false
---

WIP

- React コンポーネント内で状態管理するメリット
  - UI 上の条件分岐で絞られた値を使った処理が書ける
    - `projectId: string | undefined` という値の `undefined` のケースは loading 表示し、 `string` のケースでメイン画面の表示を行うようにしているときに、 `projectId: string` を用いて（＝ `undefined` のケースをいちいち除外せずに）メイン画面の実装が行える。
  - コンポーネントの破棄時に自動で state がリセットされる。
  - state にアクセスできる場所が state を定義したコンポーネントの子孫に基本的には絞られ、アクセス範囲が分かりやすくなる。
- React コンポーネント内で状態管理するデメリット
  - コールバック関数等の更新が render サイクルで行われ効率が悪い。
  - 子孫コンポーネントへのバケツリレーにより props が肥大化しやすい。また、バケツリレーの経由点となっている中間のコンポーネントで余計な render が発生する可能性がある。
  - useEffect での非同期処理実装の実行タイミングが読みづらくなる。コンポーネントライフサイクルに縛られるため、非同期処理の途中の任意のタイミングでコンポーネントが破棄されることを想定しなければならない。
  - コンポーネント state に依存する
